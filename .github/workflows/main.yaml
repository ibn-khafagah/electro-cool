on:
 push:
   branches:
     - main

name: ðŸš€ Deploy website on push

jobs:
 web-deploy:
   name: ðŸŽ‰ Deploy
   runs-on: ubuntu-latest
   steps:
     - name: ðŸšš Get latest code
       uses: actions/checkout@v3

     # Remove old FTP deploy state to handle renamed folders (case-sensitive fix)
     - name: ðŸ§¹ Clear FTP Deploy cache
       run: rm -f .ftp-deploy-sync-state.json

     - name: ðŸ“‚ Sync files
       uses: SamKirkland/FTP-Deploy-Action@v4.3.4
       with:
         server: ${{ secrets.ftp_server }}
         username: ${{ secrets.ftp_username }}
         password: ${{ secrets.ftp_password }}
         exclude: |
           **/.git*
           **/.git*/**
           **/node_modules/**
           **/.env
           **/composer.lock.json
           **/package-lock.json
           **/.htaccess
           **/storage/**
           **/composer.lock
